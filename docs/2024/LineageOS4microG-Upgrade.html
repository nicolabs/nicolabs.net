<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta name="apple-mobile-web-app-capable" content="yes"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="shortcut icon" type="image/png" href="/assets/about/favicon.ico"> <title> nicolabs | Install LineageOS with Google Services and root </title> <meta name="description" content=" Work in progress... "> <meta name="keywords" content="android, development, java, javascript, python, web"> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <!-- Social: Facebook / Open Graph --> <meta property="og:type" content="article"> <meta property="article:author" content="nicobo"> <meta property="article:section" content=""> <meta property="article:tag" content=""> <meta property="article:published_time" content="2024-12-21 00:00:00 +0100"> <meta property="og:url" content="http://*:4000/2024/LineageOS4microG-Upgrade"> <meta property="og:title" content=" nicolabs | Install LineageOS with Google Services and root "> <meta property="og:image" content="http://*:4000"> <meta property="og:description" content=" Work in progress... "> <meta property="og:site_name" content="nicobo"> <meta property="og:locale" content="en_US"> <!-- Social: Twitter --> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:site" content=""> <meta name="twitter:title" content=" nicolabs | Install LineageOS with Google Services and root "> <meta name="twitter:description" content=" Work in progress... "> <meta name="twitter:image:src" content="http://*:4000"> <!-- Social: Google+ / Schema.org --> <meta itemprop="name" content=" nicolabs | Install LineageOS with Google Services and root "> <meta itemprop="description" content=" Work in progress... "> <meta itemprop="image" content="http://*:4000"> <!-- rel prev and next --> <link rel="stylesheet" href="/assets/css/cactus.css" type="text/css"> <link rel="stylesheet" href="/assets/css/main.css"> <!-- Canonical link tag --> <link rel="canonical" href="http://*:4000/2024/LineageOS4microG-Upgrade"> <link type="application/atom+xml" rel="alternate" href="http://*:4000/feed.xml" title="nicolabs" /> <script type="text/javascript" src="/assets/lib/cactus.js"></script> <!-- Enable displaying pictures in full size using the Fullscreen API --> <!-- A polyfill that also simplifies the API. TODO maybe there are others closer to the norm and with more features. Still chances are this will not work on iPhone without using a full-fledged Js library. --> <script src="/assets/lib/screenfull.js/dist/screenfull.min.js"></script> <!-- This code selects which elements and how fullscreen is triggered --> <script> document.addEventListener("DOMContentLoaded", function(event) { var els = document.getElementsByClassName("plantuml"); for ( var e=0 ; e<els.length ; e++ ) { var el = els[e]; el.addEventListener('click', function() { if (screenfull.isEnabled) { screenfull.toggle(el); el.classList.toggle("fullscreen"); } else { console.log("Fullscreen not supported"); } }); } }); </script> <script> window.onscroll = function() { if (document.body.scrollTop > 0 || document.documentElement.scrollTop > 0) { document.querySelector('.site-header').classList.add('site-header-pinned'); } else { document.querySelector('.site-header').classList.remove('site-header-pinned'); } }; </script> </head> <body> <main class="wrapper"> <header class="site-header"> <nav class="nav"> <div class="container"> <h1 class="logo"><a href="/">nico<span>labs</span></a></h1> <ul class="navbar"> <li><a href="/about">about</a></li> <li><a href="/articles">articles</a></li> <li><a href="/feed.xml">feed</a></li> </ul> </div> </nav> </header> <article class="post container" itemscope itemtype="http://schema.org/BlogPosting"> <header class="post-header"> <h1 class="post-title" itemprop="name headline">Install LineageOS with Google Services and root</h1> <p class="post-meta"> <a href="https://github.com/nicolabs/nicolabs.github.io/commits/master/_posts/2024-12-21-LineageOS4microG-Upgrade.md" title="Read full history of this post"> <time class="datePublished" datetime="2024-12-21T00:00:00+01:00" itemprop="datePublished">Dec 21, 2024</time> </a> <span class="post-meta-separator">•</span> <span itemprop="read_time"> 3 minutes read </span> <span class="post-meta-separator">•</span> <span itemprop="maturity"><a href="/2016/Migrating-from-Drupal-to-Jekyll" title="Maturity of this article : draft < good < stable or deprecated&#xa;Click for the explanation.">Maturity : <span class="maturity-label maturity-draft" title="Maturity of this article : draft < good < stable or deprecated">draft</span> </span></a> </p> </header> <div class="post-content" itemprop="articleBody"> <p>LineageOS does not ship with Google apps (“gapps”), which are unfortunately required for some usages (localization, push notifications, Maps API) and by few apps which depend directly on it (which is actually a bad practice). Although LineageOS provides <a href="https://wiki.lineageos.org/gapps/">a procedure to install gapps</a>, they DO NOT support it.</p> <p><a href="https://lineage.microg.org/">LineageOS of microG</a> provides LineageOS images for your phone, <em>directly shipping with microG</em>, which is an implementation of gapps. shipping</p> <p>This short tutorial gives some details about the <strong>upgrade</strong> procedure, which were not clear to me. There is no per-device specific documentation for <em>LineageOS for microG</em>, so it is based on <a href="https://wiki.lineageos.org/devices/">the official LineageOS one</a>.</p> <h2 id="the-easy-way">The easy way</h2> <ol> <li> <p>Download the new image from : https://lineage.microg.org/ The image to install is named something like <a href="https://download.lineage.microg.org/FP3/lineage-20.0-20230604-microG-FP3.zip">lineage-20.0-20230604-microG-FP3.zip</a>.</p> </li> <li> <p>Copy the image onto your smartphone. You can just plug your phone as an USB disk.</p> </li> <li> <p>Use the “Local update” menu from the LineageOS installer app (Android admin menu &gt; System &gt; System updates &gt; expand menu button). <strong>Do not use the images proposed by the LineageOS updater app</strong> as it would install the official LineageOS image, not the microG one. You can just ignore the items proposed for download, they will disappear at the next reboot after the upgrade.</p> </li> <li> <p>Reboot the phone.</p> </li> </ol> <h2 id="the-not-so-easy-way">The not-so-easy way</h2> <ol> <li> <p>Download the new image as above.</p> </li> <li> <p>Make sure you have a custom <em>recovery</em> on your smartphone. This is a whole procedure to do if you don’t have it already, but afterwards you will keep it for future upgrades. There are indications on how to do it <em>somewhere…</em></p> </li> <li> <p>Reboot into recovery and “just” flash the .zip image Read detailed instructions for your device ; it’s something like : <code class="language-plaintext highlighter-rouge">fastboot [...]</code>, then <code class="language-plaintext highlighter-rouge">adb sideload [...]</code> (e.g. <a href="https://wiki.lineageos.org/devices/FP3/install/variant1">for Fairphone3</a>)</p> </li> <li> <p>To (re)get <em>root</em>, <a href="https://topjohnwu.github.io/Magisk/install.html">install Magisk</a> :</p> <ul> <li>Even if installing from the app, you have to download the zip (and select it from the app or install it from recovery)</li> <li>Magisk installs itself into the ROM of your phone, for this : <ol> <li>it needs the current image of the boot/recovery partition (either <code class="language-plaintext highlighter-rouge">boot.img</code>, <code class="language-plaintext highlighter-rouge">init_boot.img</code> or <code class="language-plaintext highlighter-rouge">recovery.img</code> depending on your device). So you must give it the exact image that you’ve just installed so it can patch it : e.g. for LineageOS for microG the boot.img of FP3 is in the same folder as other images to download : <a href="https://download.lineage.microg.org/FP3/lineage-20.0-20230601-microG-FP3-boot.img">lineage-20.0-20230601-microG-FP3-boot.img</a></li> <li>Then you patch it (from the app)</li> <li>Once done, download the patched image (it’s in the Downloads directory on your phone ; e.g. <code class="language-plaintext highlighter-rouge">/sdcard/Download/magisk_patched-26100_c1Cdy.img</code>) to your PC</li> <li>Finally flash back this image on your phone (<code class="language-plaintext highlighter-rouge">fastboot [...]</code>)</li> </ol> </li> </ul> </li> </ol> <aside class="tags"> <ul class="tags"> <li class="tag"><a href="/tags#android">#Android</a></li> <li class="tag"><a href="/tags#fairphone">#Fairphone</a></li> <li class="tag"><a href="/tags#google">#Google</a></li> <li class="tag"><a href="/tags#gapps">#gapps</a></li> <li class="tag"><a href="/tags#lineageos">#LineageOS</a></li> <li class="tag"><a href="/tags#magisk">#Magisk</a></li> <li class="tag"><a href="/tags#microg">#microG</a></li> <li class="tag"><a href="/tags#root">#root</a></li> </ul> </aside> <!--aside class="share"> <strong>Share this :</strong> <a href="http://twitter.com/share?text=Install LineageOS with Google Services and root&amp;url=http://*:4000/2024/LineageOS4microG-Upgrade&amp;hashtags=web,dev,blog,soudev&amp;via=" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">Twitter</a> <a href="https://www.facebook.com/sharer/sharer.php?u=http://*:4000/2024/LineageOS4microG-Upgrade" onclick="window.open(this.href, 'facebook-share', 'width=550,height=235');return false;">Facebook</a> </aside--> </div> </article> <div id="comment-section"></div> <script> initComments({ node: document.getElementById("comment-section"), defaultHomeserverUrl: "https://matrix.cactus.chat:8448", serverName: "cactus.chat", /* Chat room name will be the concatenation of 'comments_', siteName, '_', commentSectionId. E.g. #comments_nicolabs.net_LineageOS4microg-Upgrade:cactus.chat */ siteName: "nicolabs.net", /* Don't use page.url as slashes are not supported : https://gitlab.com/cactus-comments/cactus-client/-/issues/62 */ commentSectionId: "LineageOS4microG-Upgrade" }) </script> <noscript>Please enable JavaScript to view the <a href="https://cactus.chat" rel="nofollow">comments powered by matrix.org.</a></noscript> <footer class="site-footer"> <div class="container"> <small class="pull-right">by <a rel="me" href="/about#contact">@nicobo</a></small> </div> </footer> </main> </body> </html>
