<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta name="apple-mobile-web-app-capable" content="yes"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title> nicolabs | Mastodon.widget </title> <meta name="description" content=" Work in progress... "> <meta name="keywords" content="android, development, java, javascript, python, web"> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <!-- Social: Facebook / Open Graph --> <meta property="og:type" content="website"> <meta property="og:url" content="https://www.nicolabs.net/assets/lib/mastodon-timeline-widget/README_en"> <meta property="og:title" content=" nicolabs | Mastodon.widget "> <meta property="og:image" content="https://www.nicolabs.net"> <meta property="og:description" content=" Work in progress... "> <meta property="og:site_name" content="nicobo"> <meta property="og:locale" content="en_US"> <!-- Social: Twitter --> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:site" content="nic0b0"> <meta name="twitter:title" content=" nicolabs | Mastodon.widget "> <meta name="twitter:description" content=" Work in progress... "> <meta name="twitter:image:src" content="https://www.nicolabs.net"> <!-- Social: Google+ / Schema.org --> <meta itemprop="name" content=" nicolabs | Mastodon.widget "> <meta itemprop="description" content=" Work in progress... "> <meta itemprop="image" content="https://www.nicolabs.net"> <!-- rel prev and next --> <link rel="stylesheet" href="/assets/css/main.css"> <!-- Canonical link tag --> <link rel="canonical" href="https://www.nicolabs.net/assets/lib/mastodon-timeline-widget/README_en"> <link type="application/atom+xml" rel="alternate" href="https://www.nicolabs.net/feed.xml" title="nicolabs" /> <script type="text/javascript"> var disqus_shortname = 'nicolabs'; </script> <!-- Enable displaying pictures in full size using the Fullscreen API --> <!-- A polyfill that also simplifies the API. TODO maybe there are others closer to the norm and with more features. Still chances are this will not work on iPhone without using a full-fledged Js library. --> <script src="/assets/lib/screenfull.js/dist/screenfull.min.js"></script> <!-- This code selects which elements and how fullscreen is triggered --> <script> document.addEventListener("DOMContentLoaded", function(event) { var els = document.getElementsByClassName("plantuml"); for ( var e=0 ; e<els.length ; e++ ) { var el = els[e]; el.addEventListener('click', function() { if (screenfull.isEnabled) { screenfull.toggle(el); el.classList.toggle("fullscreen"); } else { console.log("Fullscreen not supported"); } }); } }); </script> <script> window.onscroll = function() { if (document.body.scrollTop > 0 || document.documentElement.scrollTop > 0) { document.querySelector('.site-header').classList.add('site-header-pinned'); } else { document.querySelector('.site-header').classList.remove('site-header-pinned'); } }; </script> </head> <body> <main class="wrapper"> <header class="site-header"> <nav class="nav"> <div class="container"> <h1 class="logo"><a href="/">nico<span>labs</span></a></h1> <ul class="navbar"> <li><a href="/about">about</a></li> <li><a href="/tags">articles</a></li> <li><a href="/feed.xml">feed</a></li> </ul> </div> </nav> </header> <article class="page container"> <header class="page-header"> <h1 class="page-title">Mastodon.widget</h1> </header> <div class="page-content"> <h1 id="mastodonwidget">Mastodon.widget</h1> <p>The idea of this little script is to allow users to display their Mastodon timeline on their blog/website.</p> <h2 id="requirements">Requirements</h2> <ul> <li>jQuery</li> <li>access token from the mastodon instance you want to display the timeline from</li> </ul> <p>You can use our wizard to generate an access token very easily. Simply follow the link below:<br /> <a href="http://www.azet.jp/mastodon.wizard/wizard_en.html">Azet.jp’s Mastodon Widget Wizard</a></p> <h2 id="installation">Installation</h2> <p>1) Download the required files (JS and CSS files in the archive).</p> <p>2) Simply paste the code bellow in you website:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">href=</span><span class="s">"mastodon.widget.css"</span><span class="nt">&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">src=</span><span class="s">"mastodon.widget.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script&gt;</span>
	<span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="c1">// jQUERY is required!</span>
		<span class="kd">var</span> <span class="nx">mapi</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MastodonApi</span><span class="p">({</span>
			<span class="na">target_selector</span>          <span class="p">:</span> <span class="dl">'</span><span class="s1">#myTimeline</span><span class="dl">'</span>
			<span class="p">,</span><span class="na">instance_uri</span>            <span class="p">:</span> <span class="dl">'</span><span class="s1">[MASTODON INSTANCE]</span><span class="dl">'</span>
			<span class="p">,</span><span class="na">access_token</span>            <span class="p">:</span> <span class="dl">'</span><span class="s1">[ACCESS TOKEN]</span><span class="dl">'</span>
			<span class="p">,</span><span class="na">account_id</span>              <span class="p">:</span> <span class="dl">'</span><span class="s1">[ACCOUNT ID]</span><span class="dl">'</span>
			<span class="c1">// === optional parameters ===</span>
			<span class="c1">//,toots_limit           : 5</span>
			<span class="c1">// samples below require http://fontawesome.io</span>
			<span class="c1">//,pic_icon              : '</span><span class="o">&lt;</span><span class="nx">i</span> <span class="kd">class</span><span class="o">=</span><span class="dl">"</span><span class="s2">fa fa-picture-o</span><span class="dl">"</span><span class="o">&gt;&lt;</span><span class="sr">/i&gt;</span><span class="err">'
</span>			<span class="c1">//,boosts_count_icon     : '</span><span class="o">&lt;</span><span class="nx">i</span> <span class="kd">class</span><span class="o">=</span><span class="dl">"</span><span class="s2">fa fa-retweet</span><span class="dl">"</span><span class="o">&gt;&lt;</span><span class="sr">/i&gt;</span><span class="err">'
</span>			<span class="c1">//,favourites_count_icon : '</span><span class="o">&lt;</span><span class="nx">i</span> <span class="kd">class</span><span class="o">=</span><span class="dl">"</span><span class="s2">fa fa-star</span><span class="dl">"</span><span class="o">&gt;&lt;</span><span class="sr">/i&gt;</span><span class="err">'
</span>		<span class="p">});</span>
	<span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div> <p>In the sample above, you have to replace the folowing:</p> <ul> <li>[MASTODON INSTANCE] =&gt; i.e : https://mastodon.technology</li> <li>[ACCESS TOKEN] =&gt; token you created for your app and linked with your Mastodon instance account</li> <li>[ACCOUNT ID] =&gt; your user ID on Mastodon instance</li> </ul> <p>3) Add a container for your timeline where you want in the body of your website:</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"myTimeline"</span> <span class="na">class=</span><span class="s">"mastodon-timeline mastodon-timeline-dark"</span><span class="nt">&gt;&lt;/div&gt;</span>
</code></pre></div></div> <p>Instead of the theme <code class="language-plaintext highlighter-rouge">mastodon-timeline-dark</code>, we provide a light theme <code class="language-plaintext highlighter-rouge">mastodon-timeline-light</code> as well.</p> <h3 id="available-parameters">Available parameters</h3> <p>The parameters below are optional.</p> <table> <thead> <tr> <th>Parameter name</th> <th>Default</th> <th>Explanation</th> </tr> </thead> <tbody> <tr> <td>toots_limit</td> <td>20</td> <td>maximum number of visible toots</td> </tr> <tr> <td>pic_icon</td> <td>[picture]</td> <td>icon to be displayed when medias are attached</td> </tr> <tr> <td>boosts_count_icon</td> <td>[boost]</td> <td>boosts count status header entry</td> </tr> <tr> <td>favourites_count_icon</td> <td>[favourite]</td> <td>favourites count status header entry</td> </tr> </tbody> </table> <p>Regarding <code class="language-plaintext highlighter-rouge">pic_icon</code>, you can use an image you have on your server like so: <code class="language-plaintext highlighter-rouge">&lt;img src="mypicicon.gif" /&gt;</code>.<br /> Or you can also use <a href="http://fontawesome.io">font-awesome</a> and set <code class="language-plaintext highlighter-rouge">&lt;i class="fa fa-picture-o"&gt;&lt;/i&gt;</code>.<br /> Same goes for <code class="language-plaintext highlighter-rouge">boosts_count_icon</code> and <code class="language-plaintext highlighter-rouge">favourites_count_icon</code>.</p> <h2 id="customization">Customization</h2> <p>You have the choice between 2 basic themes:</p> <ul> <li>mastodon-timeline-light</li> <li>mastodon-timeline-dark</li> </ul> <p>Or you can create your own. Please have a look in the CSS file for more details.</p> <h3 id="languages-supported">Languages supported</h3> <p>In a separate file, you can setup the text to support a different language.<br /> For example, in the Japanese file <code class="language-plaintext highlighter-rouge">mastodon.widget-jp.js</code> we can find the folowing settings:</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">MastodonApi</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="p">{</span>
	<span class="na">spoilerBtnClosed</span>  <span class="p">:</span> <span class="dl">"</span><span class="s2">もっと見る</span><span class="dl">"</span>
	<span class="p">,</span><span class="na">spoilerBtnOpened</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">隠す</span><span class="dl">"</span>
	<span class="p">,</span><span class="na">nsfwLabel</span>        <span class="p">:</span> <span class="dl">"</span><span class="s2">閲覧注意</span><span class="dl">"</span>
	<span class="p">,</span><span class="na">nsfwViewMsg</span>      <span class="p">:</span> <span class="dl">"</span><span class="s2">クリックして表示</span><span class="dl">"</span>
<span class="p">};</span>
</code></pre></div></div> <p>Please be sure to insert the translation javascript file <code class="language-plaintext highlighter-rouge">&lt;script&gt;</code> tag after <code class="language-plaintext highlighter-rouge">mastodon.widget.js</code>.</p> </div> </article> <footer class="site-footer"> <div class="container"> <small class="pull-left">&copy;2022 All rights reserved.</small> <small class="pull-right">by <a rel="me" href="/about#contact">@nicobo</a></small> </div> </footer> </main> </body> </html>
