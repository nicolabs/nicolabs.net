<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta name="apple-mobile-web-app-capable" content="yes"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title> nicolabs | Bypassing GitHub&#39;s Jekyll limitations </title> <meta name="description" content=" Work in progress... "> <meta name="keywords" content="android, development, java, javascript, python, web"> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <!-- Social: Facebook / Open Graph --> <meta property="og:type" content="article"> <meta property="article:author" content="nicobo"> <meta property="article:section" content=""> <meta property="article:tag" content=""> <meta property="article:published_time" content="2020-04-13 00:00:00 +0200"> <meta property="og:url" content="https://www.nicolabs.net/2020/Bypassing-GitHub-Jekyll-limitations"> <meta property="og:title" content=" nicolabs | Bypassing GitHub&#39;s Jekyll limitations "> <meta property="og:image" content="https://www.nicolabs.net"> <meta property="og:description" content=" Work in progress... "> <meta property="og:site_name" content="nicobo"> <meta property="og:locale" content="en_US"> <!-- Social: Twitter --> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:site" content="nic0b0"> <meta name="twitter:title" content=" nicolabs | Bypassing GitHub&#39;s Jekyll limitations "> <meta name="twitter:description" content=" Work in progress... "> <meta name="twitter:image:src" content="https://www.nicolabs.net"> <!-- Social: Google+ / Schema.org --> <meta itemprop="name" content=" nicolabs | Bypassing GitHub&#39;s Jekyll limitations "> <meta itemprop="description" content=" Work in progress... "> <meta itemprop="image" content="https://www.nicolabs.net"> <!-- rel prev and next --> <link rel="stylesheet" href="/assets/css/main.css"> <!-- Canonical link tag --> <link rel="canonical" href="https://www.nicolabs.net/2020/Bypassing-GitHub-Jekyll-limitations"> <link type="application/atom+xml" rel="alternate" href="https://www.nicolabs.net/feed.xml" title="nicolabs" /> <script type="text/javascript"> var disqus_shortname = 'nicolabs'; </script> <!-- Enable displaying pictures in full size using the Fullscreen API --> <!-- A polyfill that also simplifies the API. TODO maybe there are others closer to the norm and with more features. Still chances are this will not work on iPhone without using a full-fledged Js library. --> <script src="/assets/lib/screenfull.js/dist/screenfull.min.js"></script> <!-- This code selects which elements and how fullscreen is triggered --> <script> document.addEventListener("DOMContentLoaded", function(event) { var els = document.getElementsByClassName("plantuml"); for ( var e=0 ; e<els.length ; e++ ) { var el = els[e]; el.addEventListener('click', function() { if (screenfull.isEnabled) { screenfull.toggle(el); el.classList.toggle("fullscreen"); } else { console.log("Fullscreen not supported"); } }); } }); </script> <script> window.onscroll = function() { if (document.body.scrollTop > 0 || document.documentElement.scrollTop > 0) { document.querySelector('.site-header').classList.add('site-header-pinned'); } else { document.querySelector('.site-header').classList.remove('site-header-pinned'); } }; </script> </head> <body> <main class="wrapper"> <header class="site-header"> <nav class="nav"> <div class="container"> <h1 class="logo"><a href="/">nico<span>labs</span></a></h1> <ul class="navbar"> <li><a href="/about">about</a></li> <li><a href="/articles">articles</a></li> <li><a href="/feed.xml">feed</a></li> </ul> </div> </nav> </header> <article class="post container" itemscope itemtype="http://schema.org/BlogPosting"> <header class="post-header"> <h1 class="post-title" itemprop="name headline">Bypassing GitHub's Jekyll limitations</h1> <p class="post-meta"> <a href="https://github.com/nicolabs/nicolabs.github.io/commits/master/_posts/2020-04-13-Bypassing-GitHub-Jekyll-limitations.md" title="Read full history of this post"> <time class="datePublished" datetime="2020-04-13T00:00:00+02:00" itemprop="datePublished">Apr 13, 2020</time> </a> <span class="post-meta-separator">•</span> <span itemprop="read_time"> 3 minutes read </span> <span class="post-meta-separator">•</span> <span itemprop="maturity"><a href="/2016/Migrating-from-Drupal-to-Jekyll" title="Maturity of this article : draft < good < stable or deprecated&#xa;Click for the explanation.">Maturity : <span class="maturity-label maturity-good" title="Maturity of this article : draft < good < stable or deprecated">good</span> </span></a> </p> </header> <div class="post-content" itemprop="articleBody"> <p><img src="https://github.com/jekyll/brand/raw/master/jekyll-logo-dark-solid.png" alt="Jekyll logo - CC-BY-4.0 License" width="100%" /></p> <figcaption>Jekyll logo - CC-BY-4.0 License - https://github.com/jekyll/brand</figcaption> <p>As I feared when I <a href="/2016/Migrating-from-Drupal-to-Jekyll">migrated to GitHub’s hosting</a>, it has become too complicated to overcome GitHub’s limitations on Jekyll plugins and features.</p> <p>I just needed to create a <a href="https://jekyllrb.com/docs/collections/"><em>collection</em></a> to put my <a href="/2016/Migrating-from-Drupal-to-Jekyll">“live drafts”</a> into it, but the deprecated <em>jekyll-paginate</em> plugin provided with GitHub pages didn’t support collections.</p> <p>I therefore switched to offline-building my site and pushing the generated static files to GitHub, which now serves them without Jekyll processing. I still use Jekyll to generate the final static files, which is perfectly ok. The only thing I’m missing a bit is automatic build &amp; deploy after a minor edit from my android smartphone (using <a href="https://f-droid.org/fr/packages/net.gsantner.markor/">Markor</a> to edit and <a href="https://f-droid.org/fr/packages/com.manichord.mgit/">MGit</a> to push to GitHub). It might be solved with some Travis CI automation I guess…</p> <p><a href="https://help.github.com/en/github/working-with-github-pages/about-github-pages#static-site-generators">GitHub’s documentation about this</a> is not very clear on the way one can still use <em>an autonomous</em> Jekyll installation to build offline, without them building the site with <strong>their</strong> locked-down Jekyll pipeline. I assumed that I had to consider the procedure that applied to other tools. I had to :</p> <ul> <li>create a <code class="language-plaintext highlighter-rouge">.nojekyll</code> file in the root of the repo</li> <li>change <a href="https://jekyllrb.com/docs/configuration/options/">Jekyll’s output directory</a> from <code class="language-plaintext highlighter-rouge">_site</code> to <code class="language-plaintext highlighter-rouge">docs</code></li> <li>use the standard Jekyll dependencies in my <em>Gemfile</em> and specify the full <a href="https://github.com/github/pages-gem/blob/master/lib/github-pages/plugins.rb">list of plugins previously overwritten by github-pages</a> in <code class="language-plaintext highlighter-rouge">Gemfile</code> &amp; <code class="language-plaintext highlighter-rouge">_config.yml</code></li> <li>import and commit the code for the submodule <em>mastodon-timeline-widget</em> inside this repo, not only leaving the <code class="language-plaintext highlighter-rouge">.gitmodules</code> file (static Javascript files that are used in the site, which were pulled automatically during GitHub’s processing)</li> <li>make sure a <code class="language-plaintext highlighter-rouge">docs/CNAME</code> text file containing the domain to serve is present after each build (I discovered <a href="https://github.com/mkdocs/mkdocs/pull/1497/commits">it is created when the custom domain is enabled on GitHub</a> ; unfortunately it is in the output <code class="language-plaintext highlighter-rouge">docs/</code> directory, which may legitimately be deleted with a simple <code class="language-plaintext highlighter-rouge">jekyll clean</code>)</li> <li>I also had to change the name of the repo from <em>nicolabs.github.io</em> to <em>nicolabs.net</em> so it is not recognized as a user/organization repo, which was preventing me to put the code in a <code class="language-plaintext highlighter-rouge">docs</code> subdirectory (I already had an <code class="language-plaintext highlighter-rouge">index.html</code> which had to be processed by Jekyll in the repo’s root, and therefore the website’s root could not be placed here)</li> </ul> <p>Overall it was very easy and quick to migrate !</p> <aside class="tags"> <ul class="tags"> <li class="tag"><a href="/tags#blogging">#blogging</a></li> <li class="tag"><a href="/tags#jekyll">#jekyll</a></li> <li class="tag"><a href="/tags#github">#github</a></li> </ul> </aside> <!--aside class="share"> <strong>Share this :</strong> <a href="http://twitter.com/share?text=Bypassing GitHub's Jekyll limitations&amp;url=https://www.nicolabs.net/2020/Bypassing-GitHub-Jekyll-limitations&amp;hashtags=web,dev,blog,soudev&amp;via=nic0b0" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">Twitter</a> <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.nicolabs.net/2020/Bypassing-GitHub-Jekyll-limitations" onclick="window.open(this.href, 'facebook-share', 'width=550,height=235');return false;">Facebook</a> </aside--> </div> </article> <footer class="site-footer"> <div class="container"> <small class="pull-left">&copy;2024 All rights reserved. Graphic banner from https://showyourstripes.info</small> <small class="pull-right">by <a rel="me" href="/about#contact">@nicobo</a></small> </div> </footer> </main> </body> </html>
