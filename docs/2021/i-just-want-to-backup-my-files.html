<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta name="apple-mobile-web-app-capable" content="yes"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="shortcut icon" type="image/png" href="/assets/about/favicon.ico"> <title> nicolabs | I just want to backup my files </title> <meta name="description" content=" Work in progress... "> <meta name="keywords" content="android, development, java, javascript, python, web"> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <!-- Social: Facebook / Open Graph --> <meta property="og:type" content="article"> <meta property="article:author" content="nicobo"> <meta property="article:section" content=""> <meta property="article:tag" content=""> <meta property="article:published_time" content="2021-08-20 15:16:34 +0200"> <meta property="og:url" content="http://*:4000/2021/i-just-want-to-backup-my-files"> <meta property="og:title" content=" nicolabs | I just want to backup my files "> <meta property="og:image" content="http://*:4000"> <meta property="og:description" content=" Work in progress... "> <meta property="og:site_name" content="nicobo"> <meta property="og:locale" content="en_US"> <!-- Social: Twitter --> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:site" content=""> <meta name="twitter:title" content=" nicolabs | I just want to backup my files "> <meta name="twitter:description" content=" Work in progress... "> <meta name="twitter:image:src" content="http://*:4000"> <!-- Social: Google+ / Schema.org --> <meta itemprop="name" content=" nicolabs | I just want to backup my files "> <meta itemprop="description" content=" Work in progress... "> <meta itemprop="image" content="http://*:4000"> <!-- rel prev and next --> <link rel="stylesheet" href="/assets/css/cactus.css" type="text/css"> <link rel="stylesheet" href="/assets/css/main.css"> <!-- Canonical link tag --> <link rel="canonical" href="http://*:4000/2021/i-just-want-to-backup-my-files"> <link type="application/atom+xml" rel="alternate" href="http://*:4000/feed.xml" title="nicolabs" /> <script type="text/javascript" src="/assets/lib/cactus.js"></script> <!-- Enable displaying pictures in full size using the Fullscreen API --> <!-- A polyfill that also simplifies the API. TODO maybe there are others closer to the norm and with more features. Still chances are this will not work on iPhone without using a full-fledged Js library. --> <script src="/assets/lib/screenfull.js/dist/screenfull.min.js"></script> <!-- This code selects which elements and how fullscreen is triggered --> <script> document.addEventListener("DOMContentLoaded", function(event) { var els = document.getElementsByClassName("plantuml"); for ( var e=0 ; e<els.length ; e++ ) { var el = els[e]; el.addEventListener('click', function() { if (screenfull.isEnabled) { screenfull.toggle(el); el.classList.toggle("fullscreen"); } else { console.log("Fullscreen not supported"); } }); } }); </script> <script> window.onscroll = function() { if (document.body.scrollTop > 0 || document.documentElement.scrollTop > 0) { document.querySelector('.site-header').classList.add('site-header-pinned'); } else { document.querySelector('.site-header').classList.remove('site-header-pinned'); } }; </script> </head> <body> <main class="wrapper"> <header class="site-header"> <nav class="nav"> <div class="container"> <h1 class="logo"><a href="/">nico<span>labs</span></a></h1> <ul class="navbar"> <li><a href="/about">about</a></li> <li><a href="/articles">articles</a></li> <li><a href="/feed.xml">feed</a></li> </ul> </div> </nav> </header> <article class="post container" itemscope itemtype="http://schema.org/BlogPosting"> <header class="post-header"> <h1 class="post-title" itemprop="name headline">I just want to backup my files</h1> <p class="post-meta"> <a href="https://github.com/nicolabs/nicolabs.github.io/commits/master/_drafts/i-just-want-to-backup-my-files.md" title="Read full history of this post"> <time class="datePublished" datetime="2021-08-20T15:16:34+02:00" itemprop="datePublished">Aug 20, 2021</time> </a> <span class="post-meta-separator">•</span> <span itemprop="read_time"> 5 minutes read </span> <span class="post-meta-separator">•</span> <span itemprop="maturity"><a href="/2016/Migrating-from-Drupal-to-Jekyll" title="Maturity of this article : draft < good < stable or deprecated&#xa;Click for the explanation.">Maturity : <span class="maturity-label maturity-unpublished" title="Maturity of this article : draft < good < stable or deprecated">unpublished</span> </span></a> </p> </header> <div class="post-content" itemprop="articleBody"> <p>What does it mean to “just backup my files” ?</p> <p>Let’s guess the implicit requirements behind this :</p> <ul> <li>what maximum cost</li> <li>what maximum recovery delay</li> <li>how much privacy</li> <li>how much resiliency</li> <li>how deep history (file deletion or example)</li> </ul> <h3 id="covered-scenarios">Covered scenarios</h3> <ol> <li>1 disk loss <ul> <li>don’t want to download data from all disks</li> </ul> </li> <li>Unwanted file deletion <ul> <li>don’t want to download the whole data set</li> </ul> </li> </ol> <h2 id="technical-constraints">Technical constraints</h2> <p>Huge size means huge recovery time : separate data into several backup sets per priority or usage. For example one set for system configuration, one for personal configuration, one for photos, … You’re able to quickly restore your system then restore your photos over several days or weeks.</p> <h2 id="a-word-on-backblaze">A word on Backblaze</h2> <h3 id="compared-to-others">Compared to others</h3> <p>AWS Glacier is not integrated with duplicity because of its asynchronous API.</p> <p>Crash Plan does not provide an API.</p> <p>B2 price. B2 availability and durability ?</p> <p>…</p> <h3 id="options">Options</h3> <p>Personal backup solution does not match my needs because :</p> <ul> <li>requires a closed source client</li> <li>therefore client encryption cannot be trusted</li> <li>Linux not supported</li> </ul> <p>B2/Personal backup features not used (done by duplicity) :</p> <ul> <li>client side encryption</li> <li>incremental upload</li> <li>file versioning</li> </ul> <p>Duplicity also :</p> <ul> <li>supports other (cloud or not) providers</li> <li>open source</li> </ul> <h3 id="sample-reports">Sample reports</h3> <h4 id="initial-upload">Initial upload</h4> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>--------------[ Backup Statistics ]--------------
StartTime 1568759264.08 (Wed Sep 18 00:27:44 2019)
EndTime 1568759386.88 (Wed Sep 18 00:29:46 2019)
ElapsedTime 122.80 (2 minutes 2.80 seconds)
SourceFiles 588
SourceFileSize 269671106 (257 MB)
NewFiles 588
NewFileSize 269671106 (257 MB)
DeletedFiles 0
ChangedFiles 0
ChangedFileSize 0 (0 bytes)
ChangedDeltaSize 0 (0 bytes)
DeltaEntries 588
RawDeltaSize 269507266 (257 MB)
TotalDestinationSizeChange 200758158 (191 MB)
Errors 0
-------------------------------------------------

--- Finished state OK at 00:37:45.461 - Runtime 00:10:15.079 ---
</code></pre></div></div> <p>Files sizes on B2 are :</p> <ul> <li>2.6 MB for the <code class="language-plaintext highlighter-rouge">*.sigtar.gpg</code></li> <li>1.3 KB for the <code class="language-plaintext highlighter-rouge">*.manifest.gpg</code></li> <li>200.8 MB for the <code class="language-plaintext highlighter-rouge">*.vol1.difftar.gpg</code> (is it compressed / deduplicated ?)</li> </ul> <h4 id="other-uploads">Other uploads</h4> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>--------------[ Backup Statistics ]--------------
StartTime 1569029572.30 (Sat Sep 21 03:32:52 2019)
EndTime 1569051602.44 (Sat Sep 21 09:40:02 2019)
ElapsedTime 22030.15 (6 hours 7 minutes 10.15 seconds)
SourceFiles 15976
SourceFileSize 58373953276 (54.4 GB)
NewFiles 9407
NewFileSize 39419829255 (36.7 GB)
DeletedFiles 0
ChangedFiles 0
ChangedFileSize 0 (0 bytes)
ChangedDeltaSize 0 (0 bytes)
DeltaEntries 9407
RawDeltaSize 39417859079 (36.7 GB)
TotalDestinationSizeChange 35196315298 (32.8 GB)
Errors 0
-------------------------------------------------

--- Finished state OK at 09:52:56.818 - Runtime 06:22:48.465 ---

--------------[ Backup Statistics ]--------------
StartTime 1569116155.81 (Sun Sep 22 03:35:55 2019)
EndTime 1569155262.71 (Sun Sep 22 14:27:42 2019)
ElapsedTime 39106.90 (10 hours 51 minutes 46.90 seconds)
SourceFiles 15977
SourceFileSize 58373957372 (54.4 GB)
NewFiles 15977
NewFileSize 58373957372 (54.4 GB)
DeletedFiles 15975
ChangedFiles 0
ChangedFileSize 0 (0 bytes)
ChangedDeltaSize 0 (0 bytes)
DeltaEntries 31952
RawDeltaSize 58370041596 (54.4 GB)
TotalDestinationSizeChange 53905745481 (50.2 GB)
Errors 0
-------------------------------------------------

--- Finished state OK at 14:46:07.733 - Runtime 11:15:55.851 ---
</code></pre></div></div> <p>The previous one and this one ran at the same time :</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>--------------[ Backup Statistics ]--------------
StartTime 1569115942.63 (Sun Sep 22 03:32:22 2019)
EndTime 1569136911.50 (Sun Sep 22 09:21:51 2019)
ElapsedTime 20968.86 (5 hours 49 minutes 28.86 seconds)
SourceFiles 11269
SourceFileSize 26726712099 (24.9 GB)
NewFiles 11269
NewFileSize 26726712099 (24.9 GB)
DeletedFiles 0
ChangedFiles 0
ChangedFileSize 0 (0 bytes)
ChangedDeltaSize 0 (0 bytes)
DeltaEntries 11269
RawDeltaSize 26723848835 (24.9 GB)
TotalDestinationSizeChange 26108177956 (24.3 GB)
Errors 0
-------------------------------------------------

--- Finished state OK at 09:32:30.829 - Runtime 06:02:20.171 ---
</code></pre></div></div> <h2 id="the-ultimate-sensitive-place">The ultimate sensitive place</h2> <p>There is always a place that can unlock the chain , whether it’s your memory or some file. With complex secrets like GPG keys, or whole files you just cannot keep it in memory so you can either print them, or simply keep them on a hidden USB key. Save the minimal configuration to recover secret keys and backup configuration.</p> <h2 id="references">References</h2> <ul> <li>https://www.backblaze.com/backup-your-computer.html</li> <li><a href="https://help.backblaze.com/hc/en-us/articles/115001518354-How-to-configure-Backblaze-B2-with-Duplicity-on-Linux">How to configure Backblaze B2 with Duplicity on Linux</a></li> </ul> <aside class="tags"> <ul class="tags"> <li class="tag"><a href="/tags#security">#security</a></li> <li class="tag"><a href="/tags#cloud">#cloud</a></li> <li class="tag"><a href="/tags#series-your-own-cloud">#Series : your own cloud</a></li> </ul> </aside> <!--aside class="share"> <strong>Share this :</strong> <a href="http://twitter.com/share?text=I just want to backup my files&amp;url=http://*:4000/2021/i-just-want-to-backup-my-files&amp;hashtags=web,dev,blog,soudev&amp;via=" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">Twitter</a> <a href="https://www.facebook.com/sharer/sharer.php?u=http://*:4000/2021/i-just-want-to-backup-my-files" onclick="window.open(this.href, 'facebook-share', 'width=550,height=235');return false;">Facebook</a> </aside--> </div> </article> <div id="comment-section"></div> <script> initComments({ node: document.getElementById("comment-section"), defaultHomeserverUrl: "https://matrix.cactus.chat:8448", serverName: "cactus.chat", /* Chat room name will be the concatenation of 'comments_', siteName, '_', commentSectionId. E.g. #comments_nicolabs.net_LineageOS4microg-Upgrade:cactus.chat */ siteName: "nicolabs.net", /* Don't use page.url as slashes are not supported : https://gitlab.com/cactus-comments/cactus-client/-/issues/62 */ commentSectionId: "i-just-want-to-backup-my-files" }) </script> <noscript>Please enable JavaScript to view the <a href="https://cactus.chat" rel="nofollow">comments powered by matrix.org.</a></noscript> <footer class="site-footer"> <div class="container"> <small class="pull-right">by <a rel="me" href="/about#contact">@nicobo</a></small> </div> </footer> </main> </body> </html>
